{% if locale.language === 'en' %}
<script>

    window.language = 'en';
</script>
{% endif %}
{% if locale.language === 'de' %}
<script>
    window.language = 'de';
</script>
{% endif %}
{% if locale.language === 'zh' %}
<script>
    window.language = 'cn';
</script>
{% endif %}

<script>
    $(document).ready(function () {
        enhance();
        prepareForm();
        formAutocomplete();
        setTimeout(showcontent, 500);
        setTimeout(removeloading, 1000);
        setTimeout(onLoaded, 1005);
    });

    function showcontent() {
        $('.dit-outer-wrap').show();
    }

    function removeloading() {
        $('.dit-loading').fadeOut(300);
    }

    function enhance() {
        enhance_videobg();
        // zoomImageHoverLink();
    }

    function enhance_videobg() {
        if ($('#bgVid').length > 0 || $('#bgImg').length > 0) {
            $('.jumbotron').addClass('bg--transparent');
        }
    }

    function onLoaded() {
        smoothScroll();
        addActive();
        checkHeight();
        checkFormStatus();
        ifOtherSelected();
    }

    function smoothScroll() {
        //smoothscrolling and positioning
        $('a[href^="#"]').on('click', function (e) {
            // prevent default anchor click behavior
            e.preventDefault();
            // store hash
            var hash = this.hash;
            // animate
            $('html, body').stop().animate({
                scrollTop: $(hash).offset().top
            }, 600, 'swing', function () {
                window.location.hash = hash;
            });
        });
    }

    function addActive() {
        var url = window.location.pathname;
        var language = url.match(/\/\w{2}\//);
        var child = '';
        if (url.match(/\/industries\//)) {
            child = 'industries/';
        } else if (url.match(/\/investment-guide\//)) {
            child = 'investment-guide/';
//        } else if (url.match('\/help\/')) {
//            child = 'help/';
        } else if (url.match(/\/\w{2}\/$/)) {
            child = '';
        }

        if ($('ul.nav a')) {
            $('ul.nav a[href="' + language[0] + child + '"]').parent().addClass('active');
        }
    }

    function checkHeight() {

        var elem = $('div').find('.check-height');
        if (elem.length > 0) {
            equalheight(elem);
        }
    }

    function openNav() {
    var contentLastMarginLeft = 0;
    var box = $('#myNav');
    var newValue = contentLastMarginLeft;
    contentLastMarginLeft = box.css('margin-left');
    
    box.animate({
        'height': '20%'
    }, 200);

    box.animate({
        'margin-left':newValue
    }, 500);

        box.animate({
        'height': '100%'
    }, 500);
}

/* Close */
function closeNav() {
var contentLastMarginLeft = 0;
    // setTimeout($("#myNav").css('height', '20%'), 10000);
    // setTimeout($("#myNav").css('width', '100%'), 10000);
    // setTimeout($("#myNav").css('height', '100%'), 10000);
    var box = $('#myNav');
    var newValue = contentLastMarginLeft;
    contentLastMarginLeft = box.css('margin-left');
    
    box.animate({
        'height': '20%'
    }, 500);

    box.animate({
        'margin-left':'100%'
    }, 500);
}

    function checkFormStatus(){
        var field = 'enquiryId';
        var url = window.location.href;
        var formLeftSide = $('.dit-form-section__info');
        var formRightSide = $('.dit-form-section__body');
        var formSuccess = $('#formSuccess');
        var enquiryId = $('#enquiry_Id');
        if(url.indexOf('?' + field + '=') != -1){

            formLeftSide.hide();
            formRightSide.hide();
            formSuccess.show();
            $('html, body').animate({
                scrollTop: $('.dit-form-section').offset().top
            }, 2000);
            console.log('here');
            enquiryId.text(getUrlVar());
        }else{
            if(url.indexOf('&' + field + '=') != -1){
            formLeftSide.hide();
            formRightSide.hide();
            formSuccess.show();
            $('html, body').animate({
                scrollTop: formSuccess.offset().top
            }, 2000);           
            enquiryId.text(getUrlVar());
        }
    }
}

function ifOtherSelected(){
    var industry = $('#industry');
    $('#other').hide();

    industry.change(function(e){
    if ($('#industry option:selected').text() == 'Other'){
        $('#other').show();
    }else{
        $('#other').hide();
        }
    });
}

function getUrlVar(){

    var id, hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++){
        hash = hashes[i].split('=');
        id = hash[1];
    }
    return "IIGB-"+id;
}

    function prepareForm() {
        var navListItems = $('div.setup-panel div a'),
                allWells = $('.setup-content'),
                allNextBtn = $('.nextBtn'),
                allPrevBtn = $('.prevBtn'),
                submitBtn = $('.submitBtn'),
                locationSelectors = $('#location_selectors'),
                locationRadioYes = $('#location_radio_yes'),
                locationRadioNo = $('#location_radio_no');
        allWells.hide();
        locationSelectors.hide();

        locationRadioYes.click(
                function (e) {
                    locationSelectors.show();
                });

        locationRadioNo.click(
                function (e) {
                    $('#location').prop('selectedIndex', 0);
                    locationSelectors.hide();
                });

        $('#step-2').on('click', '.radio-group a', function() {
            var sel = $(this).data('title');
            var tog = $(this).data('toggle');
            $(this).parent().next('.' + tog).prop('value', sel);
            $(this).parent().find('a[data-toggle="' + tog + '"]').not('[data-title="' + sel + '"]').removeClass('active').addClass('notActive');
            $(this).parent().find('a[data-toggle="' + tog + '"][data-title="' + sel + '"]').removeClass('notActive').addClass('active');
        });

        navListItems.click(function (e) {
            e.preventDefault();
            var $target = $($(this).attr('href')),
                    $item = $(this);

            if (!$item.hasClass('disabled')) {
                navListItems.removeClass('active-selection');
                $item.addClass('active-selection');
                allWells.hide();
                $target.show();
                $target.find('input:eq(0)').focus();
            }
        });

        allNextBtn.click(function () {
            var curStep = $(this).closest(".setup-content"),
                    curStepBtn = curStep.attr("id"),
                    nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                    curInputs = curStep.find("input[type='text'],input[type='email'], #location_radio_yes, #turnover, #country, #industry, #start_date_month, #start_date_year, #staff,input[type='date']"),
                    isValid = true;

            $(".form-group").removeClass("has-error");
            for (var i = 0; i < curInputs.length; i++) {
                if (curInputs[i].hasAttribute('required') && curInputs[i].value === '') {  //changed for IE8 compatibility
                    isValid = false;
                    $(curInputs[i]).closest(".form-group").addClass("has-error");
                }
            }

            if (isValid)
                nextStepWizard.removeAttr('disabled').trigger('click');
        });

        allPrevBtn.click(function () {
            var curStep = $(this).closest(".setup-content"),
                    curStepBtn = curStep.attr("id"),
                    prevStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().prev().children("a"),
                    curInputs = curStep.find("input[type='text'],input[type='email'], #turnover:selected, #staff:selected, #country:selected, #location:selected"),
                    isValid = true;

            if (isValid)
                prevStepWizard.removeAttr('disabled').trigger('click');
        });

        $('div.setup-panel div a.active-selection').trigger('click');
    }

    function formAutocomplete(){

var countries = [
{"value": "Afghanistan", "data": "AF"}, 
{"value": "Ã…land Islands", "data": "AX"}, 
{"value": "Albania", "data": "AL"}, 
{"value": "Algeria", "data": "DZ"}, 
{"value": "American Samoa", "data": "AS"}, 
{"value": "AndorrA", "data": "AD"}, 
{"value": "Angola", "data": "AO"}, 
{"value": "Anguilla", "data": "AI"}, 
{"value": "Antarctica", "data": "AQ"}, 
{"value": "Antigua and Barbuda", "data": "AG"}, 
{"value": "Argentina", "data": "AR"}, 
{"value": "Armenia", "data": "AM"}, 
{"value": "Aruba", "data": "AW"}, 
{"value": "Australia", "data": "AU"}, 
{"value": "Austria", "data": "AT"}, 
{"value": "Azerbaijan", "data": "AZ"}, 
{"value": "Bahamas", "data": "BS"}, 
{"value": "Bahrain", "data": "BH"}, 
{"value": "Bangladesh", "data": "BD"}, 
{"value": "Barbados", "data": "BB"}, 
{"value": "Belarus", "data": "BY"}, 
{"value": "Belgium", "data": "BE"}, 
{"value": "Belize", "data": "BZ"}, 
{"value": "Benin", "data": "BJ"}, 
{"value": "Bermuda", "data": "BM"}, 
{"value": "Bhutan", "data": "BT"}, 
{"value": "Bolivia", "data": "BO"}, 
{"value": "Bosnia and Herzegovina", "data": "BA"}, 
{"value": "Botswana", "data": "BW"}, 
{"value": "Bouvet Island", "data": "BV"}, 
{"value": "Brazil", "data": "BR"}, 
{"value": "British Indian Ocean Territory", "data": "IO"}, 
{"value": "Brunei Darussalam", "data": "BN"}, 
{"value": "Bulgaria", "data": "BG"}, 
{"value": "Burkina Faso", "data": "BF"}, 
{"value": "Burundi", "data": "BI"}, 
{"value": "Cambodia", "data": "KH"}, 
{"value": "Cameroon", "data": "CM"}, 
{"value": "Canada", "data": "CA"}, 
{"value": "Cape Verde", "data": "CV"}, 
{"value": "Cayman Islands", "data": "KY"}, 
{"value": "Central African Republic", "data": "CF"}, 
{"value": "Chad", "data": "TD"}, 
{"value": "Chile", "data": "CL"}, 
{"value": "China", "data": "CN"}, 
{"value": "Christmas Island", "data": "CX"}, 
{"value": "Cocos (Keeling) Islands", "data": "CC"}, 
{"value": "Colombia", "data": "CO"}, 
{"value": "Comoros", "data": "KM"}, 
{"value": "Congo", "data": "CG"}, 
{"value": "Congo, The Democratic Republic of the", "data": "CD"}, 
{"value": "Cook Islands", "data": "CK"}, 
{"value": "Costa Rica", "data": "CR"}, 
{"value": "Cote D\"Ivoire", "data": "CI"}, 
{"value": "Croatia", "data": "HR"}, 
{"value": "Cuba", "data": "CU"}, 
{"value": "Cyprus", "data": "CY"}, 
{"value": "Czech Republic", "data": "CZ"}, 
{"value": "Denmark", "data": "DK"}, 
{"value": "Djibouti", "data": "DJ"}, 
{"value": "Dominica", "data": "DM"}, 
{"value": "Dominican Republic", "data": "DO"}, 
{"value": "Ecuador", "data": "EC"}, 
{"value": "Egypt", "data": "EG"}, 
{"value": "El Salvador", "data": "SV"}, 
{"value": "Equatorial Guinea", "data": "GQ"}, 
{"value": "Eritrea", "data": "ER"}, 
{"value": "Estonia", "data": "EE"}, 
{"value": "Ethiopia", "data": "ET"}, 
{"value": "Falkland Islands (Malvinas)", "data": "FK"}, 
{"value": "Faroe Islands", "data": "FO"}, 
{"value": "Fiji", "data": "FJ"}, 
{"value": "Finland", "data": "FI"}, 
{"value": "France", "data": "FR"}, 
{"value": "French Guiana", "data": "GF"}, 
{"value": "French Polynesia", "data": "PF"}, 
{"value": "French Southern Territories", "data": "TF"}, 
{"value": "Gabon", "data": "GA"}, 
{"value": "Gambia", "data": "GM"}, 
{"value": "Georgia", "data": "GE"}, 
{"value": "Germany", "data": "DE"}, 
{"value": "Ghana", "data": "GH"}, 
{"value": "Gibraltar", "data": "GI"}, 
{"value": "Greece", "data": "GR"}, 
{"value": "Greenland", "data": "GL"}, 
{"value": "Grenada", "data": "GD"}, 
{"value": "Guadeloupe", "data": "GP"}, 
{"value": "Guam", "data": "GU"}, 
{"value": "Guatemala", "data": "GT"}, 
{"value": "Guernsey", "data": "GG"}, 
{"value": "Guinea", "data": "GN"}, 
{"value": "Guinea-Bissau", "data": "GW"}, 
{"value": "Guyana", "data": "GY"}, 
{"value": "Haiti", "data": "HT"}, 
{"value": "Heard Island and Mcdonald Islands", "data": "HM"}, 
{"value": "Holy See (Vatican City State)", "data": "VA"}, 
{"value": "Honduras", "data": "HN"}, 
{"value": "Hong Kong", "data": "HK"}, 
{"value": "Hungary", "data": "HU"}, 
{"value": "Iceland", "data": "IS"}, 
{"value": "India", "data": "IN"}, 
{"value": "Indonesia", "data": "ID"}, 
{"value": "Iran, Islamic Republic Of", "data": "IR"}, 
{"value": "Iraq", "data": "IQ"}, 
{"value": "Ireland", "data": "IE"}, 
{"value": "Isle of Man", "data": "IM"}, 
{"value": "Israel", "data": "IL"}, 
{"value": "Italy", "data": "IT"}, 
{"value": "Jamaica", "data": "JM"}, 
{"value": "Japan", "data": "JP"}, 
{"value": "Jersey", "data": "JE"}, 
{"value": "Jordan", "data": "JO"}, 
{"value": "Kazakhstan", "data": "KZ"}, 
{"value": "Kenya", "data": "KE"}, 
{"value": "Kiribati", "data": "KI"}, 
{"value": "Korea, Democratic People\"S Republic of", "data": "KP"}, 
{"value": "Korea, Republic of", "data": "KR"}, 
{"value": "Kuwait", "data": "KW"}, 
{"value": "Kyrgyzstan", "data": "KG"}, 
{"value": "Lao People\"S Democratic Republic", "data": "LA"}, 
{"value": "Latvia", "data": "LV"}, 
{"value": "Lebanon", "data": "LB"}, 
{"value": "Lesotho", "data": "LS"}, 
{"value": "Liberia", "data": "LR"}, 
{"value": "Libyan Arab Jamahiriya", "data": "LY"}, 
{"value": "Liechtenstein", "data": "LI"}, 
{"value": "Lithuania", "data": "LT"}, 
{"value": "Luxembourg", "data": "LU"}, 
{"value": "Macao", "data": "MO"}, 
{"value": "Macedonia, The Former Yugoslav Republic of", "data": "MK"}, 
{"value": "Madagascar", "data": "MG"}, 
{"value": "Malawi", "data": "MW"}, 
{"value": "Malaysia", "data": "MY"}, 
{"value": "Maldives", "data": "MV"}, 
{"value": "Mali", "data": "ML"}, 
{"value": "Malta", "data": "MT"}, 
{"value": "Marshall Islands", "data": "MH"}, 
{"value": "Martinique", "data": "MQ"}, 
{"value": "Mauritania", "data": "MR"}, 
{"value": "Mauritius", "data": "MU"}, 
{"value": "Mayotte", "data": "YT"}, 
{"value": "Mexico", "data": "MX"}, 
{"value": "Micronesia, Federated States of", "data": "FM"}, 
{"value": "Moldova, Republic of", "data": "MD"}, 
{"value": "Monaco", "data": "MC"}, 
{"value": "Mongolia", "data": "MN"}, 
{"value": "Montserrat", "data": "MS"}, 
{"value": "Morocco", "data": "MA"}, 
{"value": "Mozambique", "data": "MZ"}, 
{"value": "Myanmar", "data": "MM"}, 
{"value": "Namibia", "data": "NA"}, 
{"value": "Nauru", "data": "NR"}, 
{"value": "Nepal", "data": "NP"}, 
{"value": "Netherlands", "data": "NL"}, 
{"value": "Netherlands Antilles", "data": "AN"}, 
{"value": "New Caledonia", "data": "NC"}, 
{"value": "New Zealand", "data": "NZ"}, 
{"value": "Nicaragua", "data": "NI"}, 
{"value": "Niger", "data": "NE"}, 
{"value": "Nigeria", "data": "NG"}, 
{"value": "Niue", "data": "NU"}, 
{"value": "Norfolk Island", "data": "NF"}, 
{"value": "Northern Mariana Islands", "data": "MP"}, 
{"value": "Norway", "data": "NO"}, 
{"value": "Oman", "data": "OM"}, 
{"value": "Pakistan", "data": "PK"}, 
{"value": "Palau", "data": "PW"}, 
{"value": "Palestinian Territory, Occupied", "data": "PS"}, 
{"value": "Panama", "data": "PA"}, 
{"value": "Papua New Guinea", "data": "PG"}, 
{"value": "Paraguay", "data": "PY"}, 
{"value": "Peru", "data": "PE"}, 
{"value": "Philippines", "data": "PH"}, 
{"value": "Pitcairn", "data": "PN"}, 
{"value": "Poland", "data": "PL"}, 
{"value": "Portugal", "data": "PT"}, 
{"value": "Puerto Rico", "data": "PR"}, 
{"value": "Qatar", "data": "QA"}, 
{"value": "Reunion", "data": "RE"}, 
{"value": "Romania", "data": "RO"}, 
{"value": "Russian Federation", "data": "RU"}, 
{"value": "RWANDA", "data": "RW"}, 
{"value": "Saint Helena", "data": "SH"}, 
{"value": "Saint Kitts and Nevis", "data": "KN"}, 
{"value": "Saint Lucia", "data": "LC"}, 
{"value": "Saint Pierre and Miquelon", "data": "PM"}, 
{"value": "Saint Vincent and the Grenadines", "data": "VC"}, 
{"value": "Samoa", "data": "WS"}, 
{"value": "San Marino", "data": "SM"}, 
{"value": "Sao Tome and Principe", "data": "ST"}, 
{"value": "Saudi Arabia", "data": "SA"}, 
{"value": "Senegal", "data": "SN"}, 
{"value": "Serbia and Montenegro", "data": "CS"}, 
{"value": "Seychelles", "data": "SC"}, 
{"value": "Sierra Leone", "data": "SL"}, 
{"value": "Singapore", "data": "SG"}, 
{"value": "Slovakia", "data": "SK"}, 
{"value": "Slovenia", "data": "SI"}, 
{"value": "Solomon Islands", "data": "SB"}, 
{"value": "Somalia", "data": "SO"}, 
{"value": "South Africa", "data": "ZA"}, 
{"value": "South Georgia and the South Sandwich Islands", "data": "GS"}, 
{"value": "Spain", "data": "ES"}, 
{"value": "Sri Lanka", "data": "LK"}, 
{"value": "Sudan", "data": "SD"}, 
{"value": "Surivalue", "data": "SR"}, 
{"value": "Svalbard and Jan Mayen", "data": "SJ"}, 
{"value": "Swaziland", "data": "SZ"}, 
{"value": "Sweden", "data": "SE"}, 
{"value": "Switzerland", "data": "CH"}, 
{"value": "Syrian Arab Republic", "data": "SY"}, 
{"value": "Taiwan, Province of China", "data": "TW"}, 
{"value": "Tajikistan", "data": "TJ"}, 
{"value": "Tanzania, United Republic of", "data": "TZ"}, 
{"value": "Thailand", "data": "TH"}, 
{"value": "Timor-Leste", "data": "TL"}, 
{"value": "Togo", "data": "TG"}, 
{"value": "Tokelau", "data": "TK"}, 
{"value": "Tonga", "data": "TO"}, 
{"value": "Trinidad and Tobago", "data": "TT"}, 
{"value": "Tunisia", "data": "TN"}, 
{"value": "Turkey", "data": "TR"}, 
{"value": "Turkmenistan", "data": "TM"}, 
{"value": "Turks and Caicos Islands", "data": "TC"}, 
{"value": "Tuvalu", "data": "TV"}, 
{"value": "Uganda", "data": "UG"}, 
{"value": "Ukraine", "data": "UA"}, 
{"value": "United Arab Emirates", "data": "AE"}, 
{"value": "United Kingdom", "data": "GB"}, 
{"value": "United States", "data": "US"}, 
{"value": "United States Minor Outlying Islands", "data": "UM"}, 
{"value": "Uruguay", "data": "UY"}, 
{"value": "Uzbekistan", "data": "UZ"}, 
{"value": "Vanuatu", "data": "VU"}, 
{"value": "Venezuela", "data": "VE"}, 
{"value": "Viet Nam", "data": "VN"}, 
{"value": "Virgin Islands, British", "data": "VG"}, 
{"value": "Virgin Islands, U.S.", "data": "VI"}, 
{"value": "Wallis and Futuna", "data": "WF"}, 
{"value": "Western Sahara", "data": "EH"}, 
{"value": "Yemen", "data": "YE"}, 
{"value": "Zambia", "data": "ZM"}, 
{"value": "Zimbabwe", "data": "ZW"} 
];

$('#country').autocomplete({
    lookup: countries
});
    }

    $(window).on('resize', function () {
        checkHeight();
    });
</script>

